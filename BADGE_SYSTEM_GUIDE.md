# 徽章系統使用指南

## 系統概述

雪狼錄音派對徽章系統採用**雙重徽章機制**，結合**里程碑獎勵**，打造完整的用戶激勵體系。

## 🎯 核心機制

### 1. 雙重徽章系統

每個課程提供兩種徽章：

#### 報名徽章 (Registration Badge)
- **獲得時機**：完成報名並付款後自動發放
- **目的**：鼓勵報名，降低決策門檻
- **稀有度**：Common / Rare
- **示例**：
  - 繪本探索者（無字繪本場）
  - 動畫學徒（動畫配音場）
  - 家庭冒險家（家庭場）

#### 完成徽章 (Completion Badge)
- **獲得時機**：實際參加課程並完成錄音
- **發放方式**：後台老師確認出席後發放
- **目的**：鼓勵出席，提高到課率
- **稀有度**：Rare / Epic / Legendary
- **示例**：
  - 故事說書人（無字繪本場）
  - 配音大師（動畫配音場）
  - 同心之帶（家庭場）

### 2. 里程碑獎勵系統

累積徽章數量可解鎖特殊獎勵：

**徽章累積方式：帳號統一累積**
- 全家所有孩子的徽章加總計算
- 例如：2個孩子各獲得4個徽章 = 帳號總共8個徽章

| 徽章數量 | 獎勵內容 | 說明 |
|---------|---------|------|
| 8 個 | 🎵 免費錄製雪狼男孩主題曲 | 錄製主題曲並後製到動畫MV上（無混音） |
| 16 個 | 🎮 雪狼RPG玩家帳號 | 解鎖線上RPG遊戲 |
| 24 個 | 👑 年度VIP派對優先資格 | 可獲得兩位入場名額（一位孩童+一位家長） |

### 里程碑獎勵詳細說明

**徽章累積規則：**
- 採用帳號統一累積制
- 全家所有孩子的徽章會加總計算
- 例如：家中有2個孩子，每人獲得4個徽章，帳號總計8個徽章

#### 🎵 8個徽章：免費錄製雪狼男孩主題曲

**獎勵內容：**
- 免費錄製一次雪狼男孩主題曲
- 孩子的聲音後製到動畫MV上
- 提供無混音版本（保持原始錄音品質）

**交付內容：**
1. 孩子演唱的主題曲音檔（WAV/MP3格式）
2. 後製完成的動畫MV影片（孩子聲音+動畫畫面）
3. 數位紀念證書

**預約流程：**
1. 達成5個徽章後，系統自動解鎖預約功能
2. 選擇方便的錄製時段（15-20分鐘）
3. 到場錄製主題曲
4. 7-10個工作天後收到後製完成的MV

**注意事項：**
- 無混音版本：保留孩子原始聲音的真實感
- 適合作為家庭紀念收藏
- 可選擇是否同意在官網展示

#### 🎮 16個徽章：雪狼RPG玩家帳號

解鎖雪狼男孩線上RPG遊戲帳號，開啟線上冒險旅程。

#### 👑 24個徽章：年度VIP派對優先資格

**獎勵內容：**
- 優先參加年度VIP派對的資格
- 可獲得兩位入場名額（一位孩童 + 一位家長）
- 與雪狼團隊近距離互動

**活動特色：**
1. 優先報名權（早於一般會員開放）
2. VIP專屬活動內容
3. 與創作團隊面對面交流
4. 限量紀念品贈送

**使用限制：**
- 需在活動前完成報名
- 入場名額：1位孩童 + 1位家長
- 額外家庭成員需另外購票

**注意事項：**
- 年度VIP派對通常在年底舉辦
- 具體日期會提前3個月公告
- 名額有限，建議儘早報名

## 📱 用戶端功能

### 徽章收藏頁面 (`/badges`)

**功能特色：**
- 顯示所有徽章（已獲得/未獲得）
- 多重過濾器：
  - 狀態過濾：全部 / 已獲得 / 未獲得
  - 類型過濾：全部 / 報名徽章 / 完成徽章
  - 類別過濾：全部 / 故事場 / 動畫場 / RPG場 / 家庭場
- 里程碑進度追蹤
- 收藏進度統計

**視覺設計：**
- 已獲得：彩色顯示，帶光暈效果
- 未獲得：灰階顯示，鎖定圖示
- 稀有度顏色：
  - Common: 灰色
  - Rare: 藍色
  - Epic: 紫色
  - Legendary: 金色

### 個人儀表板徽章展示

**功能：**
- 顯示最近獲得的 4 個徽章
- 收藏進度條
- 快速連結到完整收藏頁面

## 🔧 後台管理功能

### 課程出席管理 (`/admin/sessions/[sessionId]/attendance`)

**老師操作流程：**

1. **查看報名名單**
   - 顯示所有報名學生
   - 顯示報名徽章狀態（已自動發放）
   - 顯示完成徽章狀態

2. **確認出席**
   - 點擊「確認出席」按鈕
   - 系統自動發放完成徽章
   - 顯示成功訊息

3. **取消出席**（誤操作時）
   - 點擊「取消出席」按鈕
   - 撤回完成徽章

**統計資訊：**
- 總報名人數
- 已出席人數
- 未出席人數

## 🎨 徽章圖片對應

### 報名徽章
- 新手徽章_寫實風格.png
- 勇氣徽章_寫實風格.png
- 愛心徽章_寫實風格.png
- 召唤卷轴.png
- 古代種子_寫實風格.png
- 熱情徽章_寫實風格.png
- 森林種子_寫實風格.png

### 完成徽章
- 成長徽章_寫實風格.png
- 守護印記_電影級.png
- 同心之帶_寫實風格.png
- 星辰碎片_寫實風格.png
- 古老聖杯_寫實風格.png
- 守護之盾_寫實風格.png
- 森林護符_寫實風格.png

## 💻 技術實作

### 核心檔案

```
lib/config/badges.ts          # 徽章配置
components/badges/
  ├── BadgeCard.tsx            # 徽章卡片組件
  ├── BadgeShowcase.tsx        # 儀表板展示組件
  └── MilestoneProgress.tsx    # 里程碑進度組件
app/badges/page.tsx            # 徽章收藏頁面
app/admin/sessions/[sessionId]/attendance/page.tsx  # 出席管理頁面
```

### 資料結構

```typescript
interface Badge {
  id: string;
  name_zh: string;
  name_en: string;
  description_zh: string;
  description_en: string;
  image_url: string;
  session_id: string;
  type: 'registration' | 'completion';
  rarity: 'common' | 'rare' | 'epic' | 'legendary';
  category: 'story' | 'animation' | 'rpg' | 'family' | 'special';
}

interface MilestoneReward {
  id: string;
  badge_count: number;
  name_zh: string;
  name_en: string;
  description_zh: string;
  description_en: string;
  icon: string;
  reward_type: 'birthday_card' | 'rpg_account' | 'vip_party' | 'special';
}
```

## 🔄 業務流程

### 報名徽章發放流程
```
用戶完成報名 → 付款成功 → 系統自動發放報名徽章 → 顯示在徽章收藏
```

### 完成徽章發放流程
```
課程當天 → 學生到場 → 老師確認出席 → 系統發放完成徽章 → 檢查里程碑 → 發送通知
```

### 里程碑達成流程
```
獲得新徽章 → 計算總數 → 檢查是否達成里程碑 → 發送祝賀通知 → 發放獎勵
```

## 📊 數據追蹤建議

### 用戶端追蹤
- 徽章獲得率
- 收藏完成度
- 里程碑達成率
- 頁面訪問頻率

### 業務指標
- 報名轉化率（報名徽章激勵效果）
- 到課率（完成徽章激勵效果）
- 用戶留存率（里程碑獎勵效果）
- 重複報名率

## 🚀 未來擴展建議

1. **徽章交易系統**
   - 允許用戶交換重複徽章
   - 增加社交互動

2. **特殊活動徽章**
   - 節日限定徽章
   - 成就徽章（如：連續參加3場）

3. **徽章展示牆**
   - 公開展示收藏
   - 排行榜系統

4. **NFT整合**
   - 將徽章鑄造為NFT
   - 增加收藏價值

5. **家長儀表板**
   - 查看孩子的徽章收藏
   - 追蹤學習進度

## 📝 注意事項

1. **徽章發放時機**
   - 報名徽章：付款成功後立即發放
   - 完成徽章：課程結束後由老師確認

2. **徽章撤回規則**
   - 報名徽章：退款後自動撤回
   - 完成徽章：僅限老師誤操作時撤回

3. **里程碑獎勵發放**
   - 達成後自動通知
   - 需要用戶主動領取或自動發放

4. **數據同步**
   - 確保前後端徽章狀態一致
   - 定期備份徽章數據

## 🎉 用戶體驗優化

1. **獲得徽章時**
   - 顯示慶祝動畫
   - 播放音效
   - 推送通知

2. **達成里程碑時**
   - 全屏慶祝效果
   - 分享到社交媒體
   - 電子郵件通知

3. **收藏頁面**
   - 流暢的過濾動畫
   - 徽章懸停效果
   - 進度條動畫

---

**系統版本**: 1.0  
**最後更新**: 2026-02-04  
**維護團隊**: 雪狼錄音派對開發團隊
