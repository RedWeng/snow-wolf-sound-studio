# ğŸš¨ é—œéµå•é¡Œä¿®å¾©è¨ˆåŠƒ

## âœ… æ‰€æœ‰å•é¡Œå·²ä¿®å¾©å®Œæˆï¼

---

## å•é¡Œ 1: è³¼ç‰©è»Šç³»çµ±ä¸ä¸€è‡´ â­â­â­ CRITICAL âœ…

### ç™¼ç¾çš„å•é¡Œ
1. **Sessions é é¢** (`app/sessions/page.tsx`):
   - ä½¿ç”¨æœ¬åœ° state ç®¡ç†è³¼ç‰©è»Š
   - å­˜å„²åˆ° `localStorage.setItem('cart', ...)`
   
2. **CartContext** (`lib/context/CartContext.tsx`):
   - æä¾›å…¨å±€è³¼ç‰©è»Šç®¡ç†
   - å­˜å„²åˆ° `localStorage.setItem('snow-wolf-cart', ...)`
   
3. **Checkout é é¢** (`app/checkout/page.tsx`):
   - è®€å– `localStorage.getItem('cart')`
   - èˆ‡ CartContext ä¸åŒæ­¥ï¼

### âœ… å·²ä¿®å¾©
- çµ±ä¸€ localStorage key ç‚º `'cart'`
- Sessions é é¢æ”¹ç”¨ CartContext
- ç§»é™¤æœ¬åœ° cartItems state
- ç§»é™¤ localStorage ç›´æ¥æ“ä½œ
- æ‰€æœ‰è³¼ç‰©è»Šæ“ä½œçµ±ä¸€é€šé CartContext

**ä¿®æ”¹æª”æ¡ˆ**:
- `lib/context/CartContext.tsx` - æ›´æ”¹ storage key
- `app/sessions/page.tsx` - é‡æ§‹ä½¿ç”¨ CartContext

**è©³ç´°æ–‡æª”**: è¦‹ `CART_SYSTEM_FIX_2026-02-04.md`

---

## å•é¡Œ 2: Sessions é é¢ç„¡å­©å­ç‹€æ…‹ â­â­â­ âœ…

### å•é¡Œ
- ç”¨æˆ¶å·²ç¶“ç™»å…¥äº†
- æŒ‰éˆ•æ–‡å­—ã€Œç™»å…¥/è¨»å†Šã€èª¤å°
- æ‡‰è©²å¼•å°ç”¨æˆ¶æ–°å¢å­©å­

### âœ… å·²ä¿®å¾©
```tsx
<button
  onClick={() => router.push('/onboarding')}
  className="..."
>
  {language === 'zh' ? 'æ–°å¢å­©å­è³‡æ–™' : 'Add Child Profile'}
</button>
```

**ä¿®æ”¹æª”æ¡ˆ**: `app/sessions/page.tsx`

---

## å•é¡Œ 3: å¾½ç« é é¢ç„¡æ¬Šé™æ§åˆ¶ â­â­ âœ…

### å•é¡Œ
- ä»»ä½•äººéƒ½å¯ä»¥è¨ªå• `/badges`
- æœªç™»å…¥ç”¨æˆ¶çœ‹åˆ°ç©ºç™½é é¢

### âœ… å·²ä¿®å¾©
åœ¨ `app/badges/page.tsx` æ·»åŠ ï¼š
```tsx
const { user } = useAuth();

useEffect(() => {
  if (!user) {
    router.push('/login?redirect=/badges');
  }
}, [user, router]);
```

**ä¿®æ”¹æª”æ¡ˆ**: `app/badges/page.tsx`

---

## å•é¡Œ 4: Alert ä½¿ç”¨ä¸å‹å–„ â­â­ âœ…

### å•é¡Œ
- ä½¿ç”¨åŸç”Ÿ alert() ä¸ç¾è§€
- æ‰“æ–·ç”¨æˆ¶é«”é©—

### âœ… å·²ä¿®å¾©
ä½¿ç”¨ Toast çµ„ä»¶æ›¿ä»£æ‰€æœ‰ alert()ï¼š
```tsx
setToast({
  message: language === 'zh' 
    ? `æ­¤å ´æ¬¡å‰©é¤˜åé¡ä¸è¶³ï¼` 
    : `Not enough spots remaining!`,
  type: 'warning'
});
```

**ä¿®æ”¹æª”æ¡ˆ**: `app/sessions/page.tsx`

---

## å•é¡Œ 5: æ–°å¢å¾½ç« åœ–ç‰‡ â­ âœ…

### éœ€æ±‚
ç”¨æˆ¶ä¸Šå‚³äº† 7 å€‹æ–°çš„ã€Œé­”æˆ’é¢¨æ ¼ã€å¾½ç« åœ–ç‰‡

### âœ… å·²å®Œæˆ
æ–°å¢ 7 å€‹å¾½ç« åˆ° `futureBadges` é™£åˆ—ï¼š
1. è–æ¯ä¹‹å…‰ (Chalice of Light) - Legendary
2. æ°¸ç”Ÿä¹‹è‘‰ (Leaf of Eternity) - Legendary
3. åŒå¿ƒä¹‹å¸¶ (Band of Unity) - Epic
4. å®ˆè­·ä¹‹ç›¾ (Guardian Shield) - Epic
5. æˆ°å£«ä¹‹ç¿¼ (Warrior Wings) - Epic
6. ç…é·²ä¹‹ç›¾ (Griffin Shield) - Legendary
7. æ°¸ç”Ÿä¹‹å…‰ (Light of Eternity) - Legendary

æ‰€æœ‰å¾½ç« é¡¯ç¤ºç‚ºã€Œå¾…è§£é–ã€ç‹€æ…‹ï¼Œå¸¶æœ‰ç°éšæ•ˆæœå’Œé–å®šåœ–ç¤ºã€‚

**ä¿®æ”¹æª”æ¡ˆ**: `lib/config/badges.ts`

---

## ä¿®å¾©ç¸½çµ

### âœ… å·²å®Œæˆä¿®å¾©ï¼ˆ5/5ï¼‰
1. âœ… è³¼ç‰©è»Šç³»çµ±çµ±ä¸€ - CRITICAL
2. âœ… Sessions é é¢ç„¡å­©å­æŒ‰éˆ•
3. âœ… å¾½ç« é é¢æ¬Šé™æ§åˆ¶
4. âœ… Alert æ”¹ Toast é€šçŸ¥
5. âœ… æ–°å¢é­”æˆ’é¢¨æ ¼å¾½ç« 

### ä¿®æ”¹çš„æª”æ¡ˆ
1. `app/sessions/page.tsx` - è³¼ç‰©è»Šé‡æ§‹ã€æŒ‰éˆ•ä¿®æ­£ã€Toast é€šçŸ¥
2. `app/badges/page.tsx` - æ¬Šé™æ§åˆ¶
3. `lib/context/CartContext.tsx` - çµ±ä¸€ storage key
4. `lib/config/badges.ts` - æ–°å¢ 7 å€‹å¾½ç« 

---

## æ¸¬è©¦æ¸…å–®

### è³¼ç‰©è»Šæµç¨‹
- [ ] å¾ Sessions é é¢åŠ å…¥å•†å“åˆ°è³¼ç‰©è»Š
- [ ] ç¢ºèªè³¼ç‰©è»Šåœ–ç¤ºé¡¯ç¤ºæ­£ç¢ºæ•¸é‡
- [ ] æ‰“é–‹è³¼ç‰©è»Šå´é‚Šæ¬„ï¼Œç¢ºèªå•†å“é¡¯ç¤º
- [ ] å¾è³¼ç‰©è»Šç§»é™¤å•†å“
- [ ] å‰å¾€çµå¸³é é¢
- [ ] ç¢ºèªæ‰€æœ‰è³¼ç‰©è»Šå•†å“å‡ºç¾åœ¨çµå¸³é é¢
- [ ] å®Œæˆçµå¸³æµç¨‹
- [ ] ç¢ºèªè¨‚å–®å®Œæˆå¾Œè³¼ç‰©è»Šæ¸…ç©º

### å®Œæ•´ç”¨æˆ¶æµç¨‹
- [ ] é¦–é  â†’ é»æ“ŠæŒ‰éˆ• â†’ ç™»å…¥
- [ ] ç™»å…¥ â†’ Onboarding â†’ æ–°å¢å­©å­
- [ ] Sessions â†’ é¸æ“‡èª²ç¨‹ â†’ é¸æ“‡å­©å­ â†’ é¸æ“‡è§’è‰²
- [ ] åŠ å…¥è³¼ç‰©è»Š â†’ æŸ¥çœ‹è³¼ç‰©è»Š
- [ ] çµå¸³ â†’ å¡«å¯«è³‡æ–™ â†’ å®Œæˆè¨‚å–®
- [ ] æŸ¥çœ‹è¨‚å–® â†’ ç¢ºèªå¾½ç« æˆäºˆ
- [ ] è¨ªå•å¾½ç« é é¢ â†’ æŸ¥çœ‹æ”¶è—ï¼ˆåŒ…å«æ–°çš„é­”æˆ’é¢¨æ ¼å¾½ç« ï¼‰

### é‚Šç•Œæƒ…æ³
- [ ] ç„¡å­©å­ç‹€æ…‹ - é¡¯ç¤ºã€Œæ–°å¢å­©å­è³‡æ–™ã€æŒ‰éˆ•
- [ ] å®¹é‡ä¸è¶³ - é¡¯ç¤º Toast è­¦å‘Š
- [ ] æœªé¸æ“‡è§’è‰² - æŒ‰éˆ•ç¦ç”¨ä¸¦é¡¯ç¤ºæç¤º
- [ ] æœªç™»å…¥è¨ªå•å¾½ç« é é¢ - é‡å®šå‘åˆ°ç™»å…¥é 

---

## ğŸš€ æº–å‚™éƒ¨ç½²

æ‰€æœ‰é—œéµå•é¡Œå·²ä¿®å¾©å®Œæˆï¼Œç³»çµ±å·²æº–å‚™å¥½éƒ¨ç½²åˆ°ç”Ÿç”¢ç’°å¢ƒã€‚

**æœ€å¾Œæ›´æ–°**: 2026å¹´2æœˆ4æ—¥
**ç‹€æ…‹**: âœ… æ‰€æœ‰ä¿®å¾©å®Œæˆ - æº–å‚™éƒ¨ç½²
