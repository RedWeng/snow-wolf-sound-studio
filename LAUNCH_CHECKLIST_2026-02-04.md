# 上線前檢查清單 - Launch Checklist (2026-02-04)

## 📊 當前進度：85% 完成

---

## 🎯 明天目標 (Tomorrow's Goals)

### 1. 優化圖片 (Image Optimization)

#### 1.1 圖片壓縮與優化
- [ ] 檢查所有圖片檔案大小
  - 目標：單張圖片 < 500KB
  - 大圖片（背景）< 1MB
- [ ] 使用 Next.js Image 組件優化
  - 自動 WebP 轉換
  - 響應式圖片載入
  - Lazy loading
- [ ] 檢查圖片路徑
  - `/public/image/` 資料夾
  - `/public/image2/` 資料夾
  - `/public/full/` 資料夾（角色圖片）
  - `/public/video/` 資料夾

#### 1.2 需要優化的頁面
- [ ] 首頁 Hero 圖片
- [ ] 課程選擇頁面
  - 場次卡片圖片
  - 角色選擇圖片
  - 背景圖片
- [ ] 結帳頁面背景圖
- [ ] 確認報名頁面背景圖

#### 1.3 圖片載入效能
- [ ] 添加 loading skeleton
- [ ] 添加圖片載入失敗的 fallback
- [ ] 檢查圖片 alt 文字（無障礙）

**檔案位置：**
- `app/sessions/page.tsx`
- `app/checkout/page.tsx`
- `app/page.tsx`
- `components/landing/HeroSection.tsx`

---

### 2. 上線給助理測試 (Assistant Testing)

#### 2.1 測試環境準備
- [ ] 部署到測試環境（Vercel/Netlify）
- [ ] 確認測試環境 URL
- [ ] 準備測試帳號和測試資料

#### 2.2 測試場景清單

##### 場景 A：完整報名流程
- [ ] 新用戶註冊/登入
- [ ] 新增孩子資料（2-3 位）
- [ ] 選擇課程（單一課程）
- [ ] 選擇角色（如果需要）
- [ ] 加入購物車
- [ ] 結帳填寫資料
- [ ] 選擇付款方式
- [ ] 提交訂單

##### 場景 B：多人報名測試
- [ ] 選擇 2 位孩子報名同一課程
- [ ] 驗證折扣計算（-$300/項）
- [ ] 選擇 3 位孩子或 3 個項目
- [ ] 驗證折扣計算（-$400/項）

##### 場景 C：加購項目測試
- [ ] 選擇課程 + 加購
- [ ] 驗證加購項目出現在購物車
- [ ] 驗證加購參與折扣計算
- [ ] 驗證結帳頁面顯示加購細項

##### 場景 D：名額控制測試
- [ ] 測試剩餘 1 名額場次
  - 只能選 1 位孩子 ✓
  - 第 2 位孩子按鈕禁用 ✓
- [ ] 測試名額已滿場次
  - 所有按鈕禁用 ✓
  - 顯示「名額已滿」✓

##### 場景 E：角色選擇測試
- [ ] 雪狼經典場角色選擇
  - 每位孩子獨立選角色
  - 未選角色無法加入購物車
  - 角色選擇狀態正確顯示

##### 場景 F：付款方式測試
- [ ] 銀行轉帳
  - 顯示銀行帳號資訊
  - 上傳付款證明
  - 輸入後五碼
- [ ] LINE Pay
  - 顯示 QR Code
  - 上傳付款截圖
- [ ] 街口支付
  - 顯示付款連結
  - 上傳付款證明

#### 2.3 BUG 回報表單
準備 Google Form 或 Notion 表單，包含：
- 測試場景
- 問題描述
- 截圖
- 瀏覽器/裝置資訊
- 嚴重程度（Critical/High/Medium/Low）

---

### 3. 匯款資訊完整確認 (Payment Information Verification)

#### 3.1 銀行帳號資訊檢查
**檔案：** `lib/config/payment.ts`

- [ ] 銀行名稱：中國信託
- [ ] 銀行代碼：822
- [ ] 帳號：5986-0000-2664
- [ ] 戶名：翁鵲旻

#### 3.2 付款說明檢查
- [ ] 轉帳備註說明（訂單編號）
- [ ] 付款期限說明（3 天內）
- [ ] 付款證明上傳說明
- [ ] 後五碼輸入說明

#### 3.3 付款流程測試
- [ ] 測試銀行轉帳流程
  - 資訊顯示正確
  - 可以上傳圖片
  - 可以輸入後五碼
- [ ] 測試 LINE Pay 流程
  - QR Code 顯示
  - 可以上傳截圖
- [ ] 測試街口支付流程
  - 連結正確
  - 可以上傳證明

#### 3.4 付款確認機制
- [ ] 管理後台可以查看付款證明
- [ ] 管理後台可以確認付款狀態
- [ ] 付款確認後發送通知

**相關檔案：**
- `lib/config/payment.ts`
- `components/checkout/PaymentMethodSelector.tsx`
- `app/checkout/page.tsx`
- `app/admin/orders/page.tsx`

---

### 4. EMAIL 收發確認 (Email Verification)

#### 4.1 Email 服務設定
**檔案：** `lib/email/service.ts`

- [ ] 檢查 Resend API Key 設定
  - 環境變數：`RESEND_API_KEY`
  - `.env.local` 檔案
- [ ] 檢查發件人 Email
  - 預設：`molodyschool@gmail.com`
- [ ] 檢查收件人 Email
  - 家長 Email（用戶填寫）
  - 管理員 Email（`molodyschool@gmail.com`）

#### 4.2 Email 模板檢查
**檔案：** `lib/email/templates.ts`

##### 4.2.1 報名確認信（給家長）
- [ ] 主旨：「【雪狼錄音派對】報名確認」
- [ ] 內容包含：
  - 訂單編號
  - 家長姓名
  - 孩子資訊
  - 課程清單（日期、時間、孩子姓名）
  - 總金額
  - 付款期限
  - 銀行帳號資訊
  - 聯絡方式

##### 4.2.2 待付款通知（給管理員）
- [ ] 主旨：「【新訂單】待付款確認」
- [ ] 內容包含：
  - 訂單編號
  - 家長資訊（姓名、Email、電話）
  - 孩子資訊
  - 課程清單
  - 總金額
  - 付款方式
  - 備註

#### 4.3 Email 發送測試
- [ ] 測試報名確認信
  - 使用真實 Email 測試
  - 檢查信件格式
  - 檢查連結是否正確
  - 檢查圖片是否顯示
- [ ] 測試管理員通知
  - 確認收到通知
  - 檢查資訊完整性
- [ ] 測試 Email 送達率
  - Gmail 測試
  - Outlook 測試
  - Yahoo 測試
- [ ] 測試垃圾郵件過濾
  - 檢查是否進入垃圾郵件
  - 調整 SPF/DKIM 設定（如需要）

#### 4.4 Email 錯誤處理
- [ ] Email 發送失敗處理
  - 顯示錯誤訊息給用戶
  - 記錄錯誤日誌
  - 提供備用聯絡方式
- [ ] Email 重發機制
  - 管理後台可以重發 Email
  - 用戶可以請求重發

**測試指令：**
```bash
# 測試 Email 發送
npm run dev
# 訪問 http://localhost:3000/test-email
```

**相關檔案：**
- `lib/email/service.ts`
- `lib/email/templates.ts`
- `app/api/orders/route.ts`
- `app/test-email/page.tsx`

---

### 5. 其他補強 (Additional Improvements)

#### 5.1 錯誤處理與使用者反饋
- [ ] 所有表單驗證訊息清楚
- [ ] API 錯誤訊息友善
- [ ] Loading 狀態顯示
- [ ] 成功/失敗訊息明確

#### 5.2 響應式設計檢查
- [ ] 手機版（375px - 768px）
  - 課程卡片顯示
  - 角色選擇 UI
  - 結帳表單
  - 付款方式選擇
- [ ] 平板版（768px - 1024px）
- [ ] 桌面版（1024px+）

#### 5.3 瀏覽器相容性
- [ ] Chrome（最新版）
- [ ] Safari（最新版）
- [ ] Firefox（最新版）
- [ ] Edge（最新版）
- [ ] 手機瀏覽器
  - iOS Safari
  - Android Chrome

#### 5.4 效能優化
- [ ] Lighthouse 分數檢查
  - Performance > 80
  - Accessibility > 90
  - Best Practices > 90
  - SEO > 90
- [ ] 首次載入時間 < 3 秒
- [ ] 互動時間 < 1 秒

#### 5.5 SEO 與 Meta Tags
- [ ] 頁面標題（Title）
- [ ] 頁面描述（Description）
- [ ] Open Graph 標籤
- [ ] Favicon

#### 5.6 安全性檢查
- [ ] 環境變數不外洩
- [ ] API 端點保護
- [ ] XSS 防護
- [ ] CSRF 防護
- [ ] 輸入驗證

#### 5.7 資料備份與恢復
- [ ] 訂單資料備份機制
- [ ] 用戶資料備份機制
- [ ] 資料恢復測試

#### 5.8 監控與日誌
- [ ] 錯誤日誌記錄
- [ ] 訂單追蹤
- [ ] 使用者行為分析（選填）

---

## 📋 測試用例 (Test Cases)

### 用例 1：新用戶完整流程
```
1. 訪問首頁
2. 點擊「開始報名」
3. 註冊/登入
4. 新增孩子資料（小明，8歲）
5. 選擇「雪狼經典場」
6. 為小明選擇角色「里特」
7. 加入購物車
8. 結帳
9. 填寫家長資料
10. 選擇銀行轉帳
11. 提交訂單
12. 檢查 Email 收件匣
```

### 用例 2：多人優惠測試
```
1. 登入
2. 選擇「雪狼經典場」
3. 選擇 2 位孩子（小明、小華）
4. 為每位孩子選擇角色
5. 加入購物車
6. 檢查折扣：-$600（2 × $300）
7. 結帳
8. 驗證總金額正確
```

### 用例 3：名額控制測試
```
1. 登入
2. 選擇「世界沒有對齊」（剩餘 1 名額）
3. 嘗試選擇 2 位孩子
4. 驗證：第 1 位成功，第 2 位按鈕禁用
5. 顯示錯誤訊息
```

---

## 🐛 已知問題追蹤 (Known Issues)

### Critical（必須修復）
- [ ] 無

### High（優先修復）
- [ ] 無

### Medium（建議修復）
- [ ] 圖片載入速度優化
- [ ] 手機版 UI 微調

### Low（可選修復）
- [ ] 動畫效果優化
- [ ] 文字微調

---

## 📞 聯絡資訊 (Contact Information)

### 技術支援
- Email: molodyschool@gmail.com
- LINE ID: [待補充]
- Facebook: [待補充]

### 緊急聯絡
- 電話: [待補充]

---

## 🚀 上線步驟 (Deployment Steps)

### 1. 最終檢查
- [ ] 所有測試通過
- [ ] 所有 BUG 修復
- [ ] Email 測試成功
- [ ] 付款資訊確認

### 2. 部署到正式環境
- [ ] 設定環境變數
  - `RESEND_API_KEY`
  - 其他必要變數
- [ ] 部署到 Vercel/Netlify
- [ ] 設定自訂網域（如有）
- [ ] 設定 SSL 憑證

### 3. 上線後監控
- [ ] 監控錯誤日誌
- [ ] 監控訂單數量
- [ ] 監控 Email 發送狀態
- [ ] 收集用戶反饋

### 4. 備用計劃
- [ ] 準備回滾方案
- [ ] 準備緊急聯絡方式
- [ ] 準備常見問題解答

---

## ✅ 完成標準 (Completion Criteria)

系統可以上線的標準：

1. ✅ 所有核心功能正常運作
   - 報名流程
   - 付款流程
   - Email 發送
   - 名額控制

2. ✅ 所有 Critical 和 High 優先級 BUG 已修復

3. ✅ 至少 3 位助理完成完整測試流程

4. ✅ Email 收發測試成功（100% 送達率）

5. ✅ 付款資訊確認無誤

6. ✅ 響應式設計在主要裝置上正常顯示

7. ✅ 效能達標（Lighthouse > 80）

---

## 📝 備註 (Notes)

- 測試環境 URL: [待補充]
- 正式環境 URL: [待補充]
- 測試帳號: [待補充]
- 測試期間: 2026-02-04
- 預計上線日期: [待補充]

---

**建立日期：** 2026-02-03  
**最後更新：** 2026-02-03  
**負責人：** Kiro AI Assistant  
**狀態：** 準備中 (85% 完成)
